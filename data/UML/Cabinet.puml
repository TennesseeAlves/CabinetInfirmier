@startuml
package XMLSchema{
  class int{}
  class string{}
  class date{}
}


package URICabinet{

  class Cabinet{
    nom : string
    adresse : Adresse
    infirmiers : Infirmiers
    patients : Patients
  }
  
  class Adresse{
    {optional} étage : Étage
    numéro : NuméroDeRue
    rue : string
    codePostal : CodePostal
    ville : string
  }

  class Étage <<min-max>>{
     >= 0
  }

  class NuméroDeRue <<min-max>>{
    > 0
  }

  class CodePostal <<pattern>>{
    [0..9]{5}
  }
  
  class Infirmiers{
    liste : Infirmier[]
  }

  class Infirmier{
    {attribut} id
    nom : Nom
    prénom : Nom
    photo : string
  }
  
  class Patients{
    liste : Patient[]
  }
  
  class Patient{
    nom : Nom
    prénom : Nom
    sexe : Sexe
    naissance : date
    numéro : NuméroSecuritéSociale
    adresse : Adresse
    visites : Visite[]
  }

  class Sexe <<enum>>{
    M
   
    F
  }

  class NuméroSecuritéSociale <<pattern>>{
    [123478][0-9]{5}[0-9AB][0-9]{8}
  }
  
  class Visite{
    {attribut} date
    {attribut} intervenant
    acte : Acte[]
  }
  
  class Acte{
    {attribut} id
  }
  
  note bottom of NuméroSecuritéSociale : Ici on ne peut pas mettre "[0-9]{15}"\ncar un numéro de sécurité sociale\nne peut pas commencer par 0, 5, 6 ni 9,\net car le code département pour la corse\npeut être 2A ou 2B
 }

Cabinet *-- Adresse
Cabinet *-- Infirmiers
Cabinet *-- Patients

Adresse *-- CodePostal
Adresse *-- Étage
Adresse *-- NuméroDeRue

Infirmiers "1" *-- "many" Infirmier : list

Patients "1" *-- "many" Patient : list

Patient *-- Sexe
Patient *-- NuméroSecuritéSociale
Patient *-- Adresse
Patient "1" *-- "many" Visite : list

Visite "1" *-- "many" Acte : list
@enduml